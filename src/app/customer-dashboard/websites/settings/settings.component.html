<article *ngIf="isLoaded; else loader" class="container">
  <figure class="row breadcrumbs">
    <div class="col-12">
      <ul class="disclaimer-reg">
        <li>
          <a class="color-gray" routerLink="/">
            <i class="fas fa-home-lg-alt" style="font-size: 12px"></i>
          </a>
        </li>
        <span class="breadcrumb-greater-than">&#8250;</span>
        <li>
          <a class="color-gray" routerLink="/cloud/websites">{{
            "websites" | translate
          }}</a>
        </li>
        <span class="breadcrumb-greater-than">&#8250;</span>
        <li>
          <span class="color-gray">{{ site?.name }}</span>
        </li>
      </ul>
    </div>
  </figure>
  <!-- END of breadcrumbs -->

  <figure class="row websites-row">
    <div class="col-md-3 col-12">
      <div class="d-flex align-items-end justify-content-between">
        <div>
          <h1 class="color-black mb-2">{{ site?.name }}</h1>
          <p class="font-bold">
            <a 
              target="_blank" 
              class="color-black link-hover text-decoration-none" 
              [href]="'https://' + referrerCode + '.' + site?.url"
              >{{ referrerCode }}.{{ site?.url }} <i aria-hidden="true" class="fa fa-external-link-alt ml-1"></i>
            </a>
          </p>
        </div>
        <div class="dropdown ml-sm-auto mb-show">
          <button
            type="button"
            class="share-btn disclaimer-bold button-primary"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
          >
            <i class="far fa-share-square" aria-hidden="true"></i>
            {{ "share" | translate }}
          </button>
          <div
            class="dropdown-menu dropdown-bg dropdown-menu-right"
            aria-labelledby="dropdownMenuButton"
          >
            <a
              (click)="
                redirectFacebook('https://' + user?.code + '.' + site?.url);
                (false)
              "
              class="dropdown-item disclaimer-reg"
              href="#"
              target="_blank"
            >
              <i class="fab fa-facebook-square" aria-hidden="true"></i
              >{{ "share-on-facebook" | translate }}
            </a>

            <a
              class="dropdown-item disclaimer-reg"
              (click)="
                redirectTwitter('https://' + user?.code + '.' + site?.url);
                (false)
              "
              href="#"
            >
              <i class="fab fa-twitter-square" aria-hidden="true"></i
              >{{ "share-on-twitter" | translate }}
            </a>
            <a
              class="dropdown-item disclaimer-reg"
              href="mailto:https://{{ user?.code }}.{{ site?.url }}"
            >
              <i class="far fa-envelope" aria-hidden="true"></i
              >{{ "send-a-link-by-email" | translate }}
            </a>
            <a
              class="dropdown-item disclaimer-reg"
              href="sms:?&body=https://{{ user?.code }}.{{ site?.url }}"
            >
              <i class="far fa-comment" aria-hidden="true"></i
              >{{ "send-a-link-by-sms" | translate }}
            </a>
            <a
              class="dropdown-item disclaimer-reg"
              (click)="
                copy('https://' + user?.code + '.' + site?.url); (false)
              "
              href="#"
            >
              <i class="far fa-clone" aria-hidden="true"></i
              >{{ "copy-link" | translate }}
            </a>
          </div>
        </div>
      </div>
      <div class="side-nav">
        <ul class="nav nav-tabs flex-column" role="tablist">
          <li class="nav-item">
            <a
              class="nav-link active p-small"
              data-toggle="tab"
              href="#tabCustomize"
              role="tab"
              >{{ "customize" | translate }}</a
            >
          </li>
          <li class="nav-item">
            <a
              class="nav-link p-small"
              data-toggle="tab"
              href="#tab3rdParty"
              role="tab"
              >{{ "3rd-party-integrations" | translate }}</a
            >
          </li>
        </ul>
      </div>
    </div>

    <div class="col-md-9 col-12 analytics-wraper">
      <div class="tab-content">
        <div class="tab-pane active" id="tabCustomize" role="tabpanel">
          <div class="d-flex align-items-center mb-4 pb-0 pb-sm-3 justify-content-between mb-hide">
            <div class="dropdown ml-sm-auto">
              <button
                type="button"
                class="share-btn disclaimer-bold button-primary"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              >
                <i class="far fa-share-square" aria-hidden="true"></i>
                {{ "share" | translate }}
              </button>
              <div
                class="dropdown-menu dropdown-bg dropdown-menu-right"
                aria-labelledby="dropdownMenuButton"
              >
                <a
                  (click)="
                    redirectFacebook('https://' + user?.code + '.' + site?.url);
                    (false)
                  "
                  class="dropdown-item disclaimer-reg"
                  href="#"
                  target="_blank"
                >
                  <i class="fab fa-facebook-square" aria-hidden="true"></i
                  >{{ "share-on-facebook" | translate }}
                </a>

                <a
                  class="dropdown-item disclaimer-reg"
                  (click)="
                    redirectTwitter('https://' + user?.code + '.' + site?.url);
                    (false)
                  "
                  href="#"
                >
                  <i class="fab fa-twitter-square" aria-hidden="true"></i
                  >{{ "share-on-twitter" | translate }}
                </a>
                <a
                  class="dropdown-item disclaimer-reg"
                  href="mailto:https://{{ user?.code }}.{{ site?.url }}"
                >
                  <i class="far fa-envelope" aria-hidden="true"></i
                  >{{ "send-a-link-by-email" | translate }}
                </a>
                <a
                  class="dropdown-item disclaimer-reg"
                  href="sms:?&body=https://{{ user?.code }}.{{ site?.url }}"
                >
                  <i class="far fa-comment" aria-hidden="true"></i
                  >{{ "send-a-link-by-sms" | translate }}
                </a>
                <a
                  class="dropdown-item disclaimer-reg"
                  (click)="
                    copy('https://' + user?.code + '.' + site?.url); (false)
                  "
                  href="#"
                >
                  <i class="far fa-clone" aria-hidden="true"></i
                  >{{ "copy-link" | translate }}
                </a>
              </div>
            </div>
          </div>

          <div
            *ngIf="customizeData?.status === ''"
            class="card card-default tab-card custom-note"
          >
            <p class="color-black font-bold mb-2">Customization Note</p>
            <p class="color-gray note-text">
              We‚Äôre so excited to give you the ability to customize your site.
              Please note, when you Submit your changes they will be reviewed by
              Compliance before going live.
            </p>
          </div>

          <form [formGroup]="customizeForm">
            <div
              class="{{
                customizeData?.status === 'pending' ? 'disabled' : ''
              }}"
            >
              <div class="card card-default tab-card">
                <div class="d-flex align-items-center justify-content-between mb-3 mb-sm-4 mb-fullwidth">
                  <h3 class="color-black title">Theme</h3>
                  <div class="btn-group-right mb-hide">
                      <button 
                        *ngIf="isThemeChanged" 
                        (click)="resetThemeData()" 
                        type="button" 
                        class="btn btn-gray font-bold"
                        >Reset</button>
                      <button 
                        *ngIf="!isThemeSaved && (customizeData?.theme || isThemeChanged)"
                        [disabled]="!isThemeChanged || isSavingTheme"
                        (click)="onSaveTheme()" 
                        type="button" 
                        class="btn button-primary font-bold ml-2"
                        >Save <i *ngIf="isSavingTheme" class="fa fa-spinner fa-spin" ></i></button>
                      <button
                        *ngIf="isThemeSaved" 
                        type="button" 
                        class="btn btn-gray font-bold"
                        ><i class="fa-regular fa-check mr-2"></i>Saved
                      </button>
                  </div>
                </div>
                <div class="row theme-row">
                  <div class="col-sm-3 col-12">
                    <svg
                      width="165"
                      height="200"
                      viewBox="0 0 165 200"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <rect
                        x="0.5"
                        y="0.5"
                        width="164"
                        height="199"
                        rx="7.5"
                        [attr.fill]="customizeForm.get('theme')?.value.color"
                        fill-opacity="0.3"
                      />
                      <rect y="170" width="165" height="30" fill="white" />
                      <rect
                        x="35"
                        y="15"
                        width="95"
                        height="143"
                        rx="4"
                        fill="white"
                      />
                      <path
                        d="M35 19C35 16.7909 36.7909 15 39 15H126C128.209 15 130 16.7909 130 19V50H35V19Z"
                        [attr.fill]="customizeForm.get('theme')?.value.color"
                      />
                      <circle
                        cx="122.5"
                        cy="184.5"
                        r="7.5"
                        [attr.fill]="customizeForm.get('theme')?.value.color"
                      />
                      <circle
                        cx="42.5"
                        cy="184.5"
                        r="7.5"
                        [attr.fill]="customizeForm.get('theme')?.value.color"
                      />
                      <circle
                        cx="67.5"
                        cy="90.5"
                        r="3.5"
                        [attr.fill]="customizeForm.get('theme')?.value.color"
                      />
                      <circle
                        cx="77.5"
                        cy="90.5"
                        r="3.5"
                        [attr.fill]="customizeForm.get('theme')?.value.color"
                      />
                      <circle
                        cx="87.5"
                        cy="90.5"
                        r="3.5"
                        [attr.fill]="customizeForm.get('theme')?.value.color"
                      />
                      <circle
                        cx="97.5"
                        cy="90.5"
                        r="3.5"
                        [attr.fill]="customizeForm.get('theme')?.value.color"
                      />
                      <circle cx="82.5" cy="49.5" r="17.5" fill="#D9D9D9" />
                      <rect
                        x="62.5"
                        y="180.5"
                        width="40"
                        height="9"
                        rx="1.5"
                        fill="#D9D9D9"
                        stroke="#EEEEEE"
                      />
                      <rect
                        x="62.5"
                        y="179.5"
                        width="40"
                        height="11"
                        rx="1.5"
                        fill="white"
                        stroke="#D9D9D9"
                      />
                      <path d="M98.5 186L96 183.5L93.5 186" stroke="#D9D9D9" />
                      <path
                        d="M121.25 186.75L123.75 184.25L121.25 181.75"
                        stroke="white"
                      />
                      <path
                        d="M43.5 186.75L41 184.25L43.5 181.75"
                        stroke="white"
                      />
                      <rect
                        x="61"
                        y="77"
                        width="44"
                        height="2"
                        fill="#D9D9D9"
                      />
                      <rect
                        x="50"
                        y="103"
                        width="64"
                        height="2"
                        fill="#D9D9D9"
                      />
                      <rect
                        x="50"
                        y="113"
                        width="59"
                        height="2"
                        fill="#D9D9D9"
                      />
                      <rect
                        x="50"
                        y="123"
                        width="64"
                        height="2"
                        fill="#D9D9D9"
                      />
                      <rect
                        x="50"
                        y="133"
                        width="59"
                        height="2"
                        fill="#D9D9D9"
                      />
                      <rect
                        x="50"
                        y="143"
                        width="64"
                        height="2"
                        fill="#D9D9D9"
                      />
                      <rect
                        x="68"
                        y="185"
                        width="20"
                        height="1"
                        fill="#D9D9D9"
                      />
                      <path
                        d="M82.3125 48.875C84.9102 48.875 87.0625 46.7598 87.0625 44.125C87.0625 41.5273 84.9102 39.375 82.3125 39.375C79.6777 39.375 77.5625 41.5273 77.5625 44.125C77.5625 46.7598 79.6777 48.875 82.3125 48.875ZM80.6055 50.6562C76.9316 50.6562 74 53.625 74 57.2988C74 57.8926 74.4824 58.375 75.0762 58.375H89.5117C90.1055 58.375 90.625 57.8926 90.625 57.2988C90.625 53.625 87.6562 50.6562 83.9824 50.6562H80.6055Z"
                        fill="white"
                      />
                      <rect
                        x="0.5"
                        y="0.5"
                        width="164"
                        height="199"
                        rx="7.5"
                        stroke="#DDDDDD"
                      />
                    </svg>
                  </div>
                  <div formGroupName="theme" class="col-sm-9 col-12">
                    <p class="color-black disclaimer-reg mt-3 mt-sm-0 mb-2">
                      Color
                    </p>

                    <p class="color-black">
                      <label for="colorPicker" class="color-picker">
                        <input
                          type="color"
                          id="colorPicker"
                          formControlName="color"
                          (change)="onChangeColorPicker($event)"
                        />
                        <span>{{
                          customizeForm.get("theme")?.value.color
                        }}</span></label
                      >
                      <small class="disclaimer-reg color-gray d-block mt-2"
                        >This will replace Pr√ºvit‚Äôs default accent color</small
                      >
                    </p>

                    <div class="form-check form-switch my-3 my-sm-4">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="showContact"
                        formControlName="contactForm"
                      />
                      <label
                        class="form-check-label color-black disclaimer-bold"
                        for="showContact"
                        >Show contact form</label
                      >
                    </div>
                  </div>
                </div>
                <div class="mb-fullwidth mb-show">
                  <div class="btn-group-right">
                      <button 
                        *ngIf="isThemeChanged" 
                        (click)="resetThemeData()" 
                        type="button" 
                        class="btn btn-gray font-bold"
                        >Reset</button>
                      <button 
                        *ngIf="!isThemeSaved && (customizeData?.theme || isThemeChanged)"
                        [disabled]="!isThemeChanged || isSavingTheme"
                        (click)="onSaveTheme()" 
                        type="button" 
                        class="btn button-primary font-bold ml-2"
                        >Save <i *ngIf="isSavingTheme" class="fa fa-spinner fa-spin" ></i></button>
                      <button
                        *ngIf="isThemeSaved" 
                        type="button" 
                        class="btn btn-gray font-bold"
                        ><i class="fa-regular fa-check mr-2"></i>Saved
                      </button>
                  </div>
                </div>
              </div>

              <div class="card card-default tab-card">
                <div class="d-flex align-items-center justify-content-between mb-sm-3 mb-2 mb-fullwidth">
                  <h3 class="color-black title">Links</h3>
                  <div class="btn-group-right mb-hide">
                      <button 
                        *ngIf="isLinksChanged" 
                        (click)="resetLinkData()" 
                        type="button" 
                        class="btn btn-gray font-bold"
                        >Reset
                      </button>
                      <button 
                        *ngIf="!isLinksSaved && (customizeData?.links || isLinksChanged)"
                        [disabled]="!isLinksChanged || !isAllValidLinks || isSavingLinks"
                        (click)="onSaveLinks()"
                        type="button" 
                        class="btn button-primary font-bold ml-2"
                        >Save <i *ngIf="isSavingLinks" class="fa fa-spinner fa-spin"></i>
                      </button>
                      <button 
                        *ngIf="isLinksSaved" 
                        type="button" 
                        class="btn btn-gray font-bold"
                        ><i class="fa-regular fa-check mr-2"></i>Saved
                      </button>
                  </div>
                </div>
                <p class="disclaimer-reg color-gray mb-sm-4 mb-3">
                  Add links to your favorite approved Pr√ºvit pages to help your visitors be a part of the Ketone Conversation‚Ñ¢.
                </p>

                <p class="disclaimer-reg color-white about-me-info mb-4">
                  <i class="fas fa-question-circle mr-2"></i>
                  Approved domains: shopketo.com, pruvitnow.com, pruvit.tv, pvt.ai, experienceketo.com
                </p>

                <div id="linksDynamicRow" class="row links-row">
                  <ng-container
                    formArrayName="links"
                    *ngFor="let item of links.controls; let i = index"
                  >
                    <div [formGroupName]="i" class="row col-sm-12 link-space">
                      <div class="col-sm-6 col-12 links-col">
                        <div class="form-group d-flex align-items-center">
                          <span class="line-icon color-gray">
                            <i class="fas fa-link form-icon color-gray"></i>
                          </span>
                          <input
                            type="text"
                            class="form-control disclaimer-reg"
                            formControlName="title"
                            placeholder="Link title"
                          />
                        </div>
                      </div>

                      <div
                        class="col-sm-6 col-12 d-flex align-items-center justify-content-between links-col"
                      >
                        <div class="form-group mar-left">
                          <i
                            class="fas fa-link form-icon color-gray"
                            aria-hidden="true"
                          ></i>
                          <input
                            type="text"
                            class="form-control disclaimer-reg icon"
                            placeholder="Link"
                            formControlName="link"
                          />
                        </div>

                        <div class="dropdown ml-2">
                          <span
                            class="dropdown-toggle"
                            data-toggle="dropdown"
                            aria-expanded="false"
                            ><i class="fal fa-ellipsis-v" aria-hidden="true"></i
                          ></span>
                          <div
                            class="dropdown-menu dropdown-menu-right p-0"
                            aria-labelledby="dropdownMenuButton"
                          >
                            <a
                              class="dropdown-item disclaimer-reg color-black"
                              href="#"
                              (click)="moveLinkUp(i)"
                              ><i class="fas fa-arrow-up"></i>Move up</a
                            >
                            <a
                              (click)="moveLinkDown(i)"
                              class="dropdown-item disclaimer-reg color-black"
                              href="#"
                              ><i class="fas fa-arrow-down"></i>Move down</a
                            >
                            <a
                              (click)="onLinkRemove(i)"
                              class="dropdown-item disclaimer-reg color-black"
                              href="#"
                              ><i class="fas fa-trash"></i
                              >{{ "delete" | translate }}</a
                            >
                          </div>
                        </div>
                      </div>
                      <p *ngIf="linkErrorAt === i" class="col-12 invalid-link-msg mb-2 ml-3 disclaimer-bold">Please enter a link from one of the approved Pr√ºvit domains.</p>
                    </div>
                  </ng-container>

                  <div class="col-12 mt-2 mt-sm-3">
                    <button
                      type="button"
                      (click)="onAddNewLink()"
                      class="btn disclaimer-bold color-black btn-new-link"
                    >
                      <i class="fas fa-plus mr-2"></i>New link
                    </button>
                  </div>
                </div>
                <div class="mb-fullwidth mb-show">
                  <div class="btn-group-right">
                      <button 
                        *ngIf="isLinksChanged" 
                        (click)="resetLinkData()" 
                        type="button" 
                        class="btn btn-gray font-bold"
                        >Reset
                      </button>
                      <button 
                        *ngIf="!isLinksSaved && (customizeData?.links || isLinksChanged)"
                        [disabled]="!isLinksChanged || !isAllValidLinks || isSavingLinks"
                        (click)="onSaveLinks()"
                        type="button" 
                        class="btn button-primary font-bold ml-2"
                        >Save <i *ngIf="isSavingLinks" class="fa fa-spinner fa-spin"></i>
                      </button>
                      <button 
                        *ngIf="isLinksSaved" 
                        type="button" 
                        class="btn btn-gray font-bold"
                        ><i class="fa-regular fa-check mr-2"></i>Saved
                      </button>
                  </div>
                </div>
              </div>

              <div class="card card-default tab-card">
                <div class="row">
                  <div class="col-12 d-flex align-items-center justify-content-between mb-sm-3 mb-2 mb-fullwidth">
                    <h3 class="color-black title">Favorite products
                    </h3>
                    <div class="btn-group-right mb-hide">
                        <button 
                          *ngIf="isFavProductsChanged" 
                          (click)="resetFavProductData()" 
                          type="button" 
                          class="btn btn-gray font-bold"
                          >Reset
                        </button>
                        <button 
                          *ngIf="!isFavProductsSaved && (customizeData?.favoriteProducts || isFavProductsChanged)"
                          [disabled]="!isFavProductsChanged || isSavingFavProducts"
                          (click)="onSaveFavProducts()"
                          type="button" 
                          class="btn button-primary font-bold ml-2"
                          >Save <i *ngIf="isSavingFavProducts" class="fa fa-spinner fa-spin"></i>
                        </button>
                        <button 
                          *ngIf="isFavProductsSaved"
                          type="button" 
                          class="btn btn-gray font-bold"
                          ><i class="fa-regular fa-check mr-2"></i>Saved
                        </button>
                    </div>
                  </div>
                </div>

                <app-loader
                  *ngIf="!isProductLoaded; else productLoaded"
                  class="payment--loader"
                ></app-loader>
                <ng-template #productLoaded>
                  <div class="row mt-3 mt-sm-4 flex-column flex-sm-row">
                    <div class="col px-sm-3 px-0">
                      <div class="dropdown custom product-search">
                        <div class="form-group mb-0">
                          <i
                            class="fal fa-search form-icon"
                            aria-hidden="true"
                          ></i>
                          <input
                            type="text"
                            id="SearchProduct"
                            class="form-control disclaimer-reg icon"
                            placeholder="Enter product name"
                            data-toggle="dropdown"
                            aria-haspopup="true"
                            aria-expanded="false"
                            [formControl]="searchControl"
                          />

                          <div
                            class="settings-product-dropdown dropdown-menu dropdown-bg"
                          >
                            <div
                              *ngIf="
                                searchProducts.length;
                                else noSearchProduct
                              "
                            >
                              <div
                                *ngFor="
                                  let product of searchProducts;
                                  let i = index
                                "
                              >
                                <div
                                  *ngIf="!product.isFavorite"
                                  class="dropdown-item d-flex"
                                  (click)="onAddFavProduct(product, i)"
                                >
                                  <div class="img-left">
                                    <img
                                      [src]="product.image"
                                      class="img-fluid"
                                      alt="img"
                                    />
                                  </div>
                                  <div class="text-area">
                                    <p class="disclaimer-bold color-black">
                                      {{ product.title }}
                                    </p>
                                    <p class="disclaimer-reg color-gray">
                                      {{ product.flavor }}
                                    </p>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <ng-template #noSearchProduct>
                              <div class="dropdown-item d-flex">
                                <div class="text-area">
                                  <p class="disclaimer-bold color-black">
                                    No product found
                                  </p>
                                </div>
                              </div>
                            </ng-template>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="pr-0 pr-sm-3 mt-3 mt-sm-0 dropdown custom country ml-auto">
                      <button
                        class="btn cont-btn disclaimer-bold"
                        type="button"
                        data-toggle="dropdown"
                        aria-haspopup="true"
                        aria-expanded="false"
                      >
                        <span class="mr-2 lang-icon">
                          <svg
                            width="16"
                            height="15"
                            viewBox="0 0 16 15"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path
                              d="M5.8125 0.34375C3.71875 0.96875 2 2.53125 1.125 4.5H4.25C4.53125 2.78125 5.09375 1.3125 5.8125 0.34375ZM5 7.5C5 8.21875 5.03125 8.875 5.09375 9.5H10.875C10.9375 8.875 11 8.21875 11 7.5C11 6.8125 10.9375 6.15625 10.875 5.5H5.09375C5.03125 6.15625 5 6.8125 5 7.5ZM10.7188 4.5C10.2188 1.75 9.0625 0 8 0C6.90625 0 5.75 1.75 5.25 4.5H10.7188ZM14.8438 4.5C13.9688 2.53125 12.25 0.96875 10.1562 0.34375C10.875 1.3125 11.4375 2.78125 11.7188 4.5H14.8438ZM10.1562 14.6875C12.25 14.0625 13.9688 12.5 14.8438 10.5H11.7188C11.4375 12.25 10.875 13.7188 10.1562 14.6875ZM15.2188 5.5H11.875C11.9375 6.15625 11.9688 6.8125 11.9688 7.5C11.9688 8.21875 11.9375 8.875 11.875 9.5H15.2188C15.375 8.875 15.4688 8.21875 15.4688 7.5C15.4688 6.8125 15.375 6.15625 15.2188 5.5ZM5.25 10.5C5.75 13.2812 6.90625 15 7.96875 15C9.0625 15 10.2188 13.2812 10.7188 10.5H5.25ZM4 7.5C4 6.8125 4.03125 6.15625 4.09375 5.5H0.75C0.59375 6.15625 0.46875 6.8125 0.46875 7.5C0.46875 8.21875 0.59375 8.875 0.75 9.5H4.09375C4.03125 8.875 4 8.21875 4 7.5ZM1.125 10.5C2 12.5 3.6875 14.0625 5.8125 14.6875C5.09375 13.7188 4.53125 12.25 4.25 10.5H1.125Z"
                              fill="#030C21"
                              fill-opacity="0.478431"
                            ></path>
                          </svg>
                        </span>
                        {{
                          productCountry
                            ? productCountry.country
                            : "United States"
                        }}
                      </button>
                      <div
                        *ngIf="countries.length"
                        class="dropdown-menu dropdown-bg"
                        aria-labelledby="dropdownMenuButton"
                      >
                        <a
                          *ngFor="let country of countries"
                          class="dropdown-item pointer"
                          (click)="onChangeProductCountry(country)"
                          attr.data-countrycode="{{ country.country_code }}"
                          >{{ country.country }}</a
                        >
                      </div>
                    </div>
                  </div>

                  <div
                    *ngIf="
                      favProducts[productCountryCode]?.length;
                      else noFavProducts
                    "
                    class="row favorite-products-row"
                  >
                    <div
                      *ngFor="
                        let product of favProducts[productCountryCode];
                        let i = index
                      "
                      class="col-sm-3 col-6"
                    >
                      <div class="product-card text-center">
                        <div class="product-img">
                          <img
                            [src]="product.image"
                            class="img-fluid"
                            alt="img"
                          />
                        </div>
                        <div class="product-details">
                          <p class="p-small color-black font-bold">
                            {{ product.title }}
                          </p>
                          <p class="disclaimer-reg color-gray">
                            {{ product.flavor }}
                          </p>
                        </div>
                        <p>
                          <a
                            href="javascript:void(0);"
                            (click)="onRemoveFavProduct(product, i)"
                            class="disclaimer-bold link-hover"
                            ><i class="fas fa-trash mr-2" aria-hidden="true"></i
                            >{{ "remove" | translate }}</a
                          >
                        </p>
                      </div>
                    </div>
                  </div>

                  <ng-template #noFavProducts>
                    <div class="row favorite-products-row noProducts">
                      <div class="col-12">
                        <div class="product-card text-center">
                          <div class="inner">
                            <p class="color-black font-bold mb-sm-3 mb-2">
                              No favorite products selected
                            </p>
                            <p class="p-small color-gray">
                              Search for products above and add them to your
                              favorites.
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </ng-template>
                </ng-template>
                <div class="mb-fullwidth mb-show">
                  <div class="btn-group-right">
                      <button 
                        *ngIf="isFavProductsChanged" 
                        (click)="resetFavProductData()" 
                        type="button" 
                        class="btn btn-gray font-bold"
                        >Reset
                      </button>
                      <button 
                        *ngIf="!isFavProductsSaved && (customizeData?.favoriteProducts || isFavProductsChanged)"
                        [disabled]="!isFavProductsChanged || isSavingFavProducts"
                        (click)="onSaveFavProducts()"
                        type="button" 
                        class="btn button-primary font-bold ml-2"
                        >Save <i *ngIf="isSavingFavProducts" class="fa fa-spinner fa-spin"></i>
                      </button>
                      <button 
                        *ngIf="isFavProductsSaved"
                        type="button" 
                        class="btn btn-gray font-bold"
                        ><i class="fa-regular fa-check mr-2"></i>Saved
                      </button>
                  </div>
                </div>
              </div>

              <div class="d-flex align-items-center justify-content-between mb-sm-3 mb-2 mt-5 mb-fullwidth">
                <h3 class="color-black title">Requires compliance approval</h3>
                <div class="btn-group-right">
                    <button (click)="onClickPreview()" type="button" class="btn button-primary font-bold"><i class="fa fa-external-link-alt mr-2"></i> Preview</button>
                </div>
              </div>
              <p class="p-18 color-gray mb-sm-4 mb-3">We‚Äôre so excited to give you the ability to customize your site. Please note that, for the items below, when you Submit your changes they will be reviewed by Compliance before going live. You can click the ‚ÄôPreview‚Äô button above to see how the changes would look live before submitting them.</p>

              <div class="card card-default tab-card">
                <div class="d-flex flex-column flex-sm-row justify-content-between mb-sm-3 mb-2 mb-fullwidth">
                  <h3 class="color-black title">About Me</h3>
                    <div class="btn-group-right d-flex justify-content-between mt-2 mb-hide">
                      <button 
                        *ngIf="isShortBioChanged" 
                        (click)="resetShortBioata()" 
                        type="button" 
                        class="btn btn-gray font-bold"
                        >Reset
                      </button>

                      <button 
                        *ngIf="customizeData?.shortBio?.status === 'approved' && !isShortBioChanged"
                        type="button"
                        class="btn button-primary font-bold ml-2 btn-green"
                      >
                        <i class="fa-regular fa-check mr-2"></i>Approved
                      </button>
          
                      <button
                        *ngIf="customizeData?.shortBio?.status === 'pending' && !isShortBioChanged"
                        (click)="onCancelShortBio()"
                        class="btn btn-gray disclaimer-bold ml-2"
                        ><i class="fa-regular fa-xmark mr-2"></i>Cancel request <i *ngIf="isCancellingBio" class="fa fa-spinner fa-spin" ></i>
                      </button>

                      <button 
                        *ngIf="customizeData?.shortBio?.status === 'pending' && !isShortBioChanged" 
                        type="button" 
                        class="btn btn-orange font-bold under-review-btn ml-2"
                        ><i class="fas color-white fa-clock mr-2"></i><span class="color-white">Under review</span>
                      </button>

                      <button 
                        *ngIf="isShortBioChanged"
                        (click)="onSaveShortBio()"
                        [disabled]="isSavingBio"
                        type="button" 
                        class="btn button-primary font-bold ml-0 ml-sm-2 ml-2"
                        ><i class="fa-regular fa-clipboard-list mr-2"></i>Submit for review <i *ngIf="isSavingBio" class="fa fa-spinner fa-spin" ></i>
                      </button>
                    </div>
                </div>
                <p class="color-black font-bold">Short bio</p>
                <p class="disclaimer-reg color-white about-me-info mt-3">
                  <i class="fas fa-question-circle mr-2"></i>Read our <a href="https://support.justpruvit.com/hc/en-us/articles/360052144292" target="_blank"><strong>Social Media Guidelines</strong></a> and strictly avoid
                  health claims
                </p>

                <div formGroupName="shortBio" class="editor-wrap my-3 color-black">
                  <quill-editor
                    #quillEditor
                    formControlName="bioData"
                    class="p-small"
                    [modules]="editorModules"
                    (onContentChanged)="getQuillEditorInstance($event)"
                    (onEditorCreated)="getQuillEditorInstance($event)"
                    [styles]="{ height: '200px' }"
                    placeholder=""
                  ></quill-editor>
                </div>
                <div class="mb-fullwidth mb-show">
                  <div class="btn-group-right">
                    <button 
                      *ngIf="isShortBioChanged" 
                      (click)="resetShortBioata()" 
                      type="button" 
                      class="btn btn-gray font-bold"
                      >Reset
                    </button>

                    <button 
                      *ngIf="customizeData?.shortBio?.status === 'approved' && !isShortBioChanged"
                      type="button"
                      class="btn button-primary font-bold ml-2 btn-green"
                    >
                      <i class="fa-regular fa-check mr-2"></i>Approved
                    </button>
        
                    <button
                      *ngIf="customizeData?.shortBio?.status === 'pending' && !isShortBioChanged"
                      (click)="onCancelShortBio()"
                      class="btn btn-gray disclaimer-bold ml-2"
                      ><i class="fa-regular fa-xmark mr-2"></i>Cancel request <i *ngIf="isCancellingBio" class="fa fa-spinner fa-spin" ></i>
                    </button>

                    <button 
                      *ngIf="customizeData?.shortBio?.status === 'pending' && !isShortBioChanged" 
                      type="button" 
                      class="btn btn-orange font-bold under-review-btn ml-2"
                      ><i class="fas color-white fa-clock mr-2"></i><span class="color-white">Under review</span>
                    </button>

                    <button 
                      *ngIf="isShortBioChanged"
                      (click)="onSaveShortBio()"
                      [disabled]="isSavingBio"
                      type="button" 
                      class="btn button-primary font-bold ml-0 ml-sm-2 ml-2"
                      ><i class="fa-regular fa-clipboard-list mr-2"></i>Submit for review <i *ngIf="isSavingBio" class="fa fa-spinner fa-spin" ></i>
                    </button>
                  </div>
                </div>
              </div>

              <div formGroupName="introVideo" class="card card-default tab-card">
                <div class="d-flex flex-column flex-sm-row justify-content-between mb-sm-3 mb-2 mb-fullwidth">
                  <h3 class="color-black title">Introduction Video</h3>
                  <div class="btn-group-right d-flex justify-content-between mt-2 mb-hide">
                    <button 
                      *ngIf="customizeData?.introVideo?.videoId"
                      (click)="onRemoveIntroVideo()"
                      [disabled]="isCancellingVideo"
                      type="button" 
                      class="btn btn-gray font-bold"
                      ><i class="fa-regular fa-trash mr-2"></i>Remove <i *ngIf="isCancellingVideo" class="fa fa-spinner fa-spin"></i>
                    </button>
                    <button 
                      *ngIf="customizeData?.introVideo?.status === 'approved'"
                      type="button" 
                      class="btn button-primary font-bold ml-2 btn-green"
                      ><i class="fa-regular fa-check mr-2"></i>Approved
                    </button>
                    <button 
                      *ngIf="customizeData?.introVideo?.status === 'pending'" 
                      type="button" 
                      class="btn btn-orange font-bold ml-2"
                      ><i class="fas color-white fa-clock mr-2"></i><span class="color-white">Under review</span>
                    </button>
                  </div>
                </div>
                <p class="disclaimer-reg color-gray mb-sm-5 mb-4">
                  Upload a personalized video introduction for your website
                  visitors so they feel welcome and connected to you
                </p>
                <p class="color-black font-bold mb-sm-3 mb-2">
                  Video Guidelines
                </p>
                <div class="row">
                  <div class="col-sm-6 col-12 px-sm-3 px-2">
                    <p class="color-black font-bold"><span>üëç</span> DO</p>
                    <ul class="guidelines-list disclaimer-reg">
                      <li>Read the Social Media Guidelines</li>
                      <li>Introduce yourself to your new customer</li>
                      <li>Smile and be excited</li>
                      <li>Change it regularly</li>
                      <li>Announce special offers and limited releases</li>
                    </ul>
                  </div>
                  <div class="col-sm-6 col-12 px-sm-3 px-2">
                    <p class="color-black font-bold"><span>üëé</span> DO NOT</p>
                    <ul class="guidelines-list disclaimer-reg">
                      <li>
                        {{ "do-not-make-direct-health-claims" | translate }}
                      </li>
                      <li>{{ "do-not-make-income-claims" | translate }}</li>
                      <li>Do not mention other products or brands</li>
                      <li>Watch out for bad lighting and sound quality</li>
                    </ul>
                  </div>
                </div>

                <div class="dragbox-outer">
                  <div
                    *ngIf="customizeData?.introVideo?.videoId"
                    class="wistia_embed wistia_async_{{customizeData?.introVideo?.videoId}}"
                    popoverAnimateThumbnail="true"
                    videoFoam="true"
                    controlsVisibleOnLoad="false"
                    style="height: 320px; width: 100%"
                  >
                    &nbsp;
                  </div>

                  <div
                    id="wistia_uploader"
                    class="{{customizeData?.introVideo?.videoId ? 'hide' : ''}}"
                    style="height: auto; width: 100%; padding-bottom: 50px"
                  >
                    <div
                      id="wistia_upload_preview"
                      class="wistia_upload_preview"
                    ></div>
                  </div>

                  <input
                    #introVideoIdInput
                    type="text"
                    name="introVideoId"
                    style="visibility: hidden"
                    [value]="customizeData?.introVideo?.videoId"
                  />
                </div>
                <div class="mb-fullwidth mb-show">
                  <div class="btn-group-right">
                    <button 
                      *ngIf="customizeData?.introVideo?.videoId"
                      (click)="onRemoveIntroVideo()"
                      [disabled]="isCancellingVideo"
                      type="button" 
                      class="btn btn-gray font-bold"
                      ><i class="fa-regular fa-trash mr-2"></i>Remove <i *ngIf="isCancellingVideo" class="fa fa-spinner fa-spin"></i>
                    </button>
                    <button 
                      *ngIf="customizeData?.introVideo?.status === 'approved'"
                      type="button" 
                      class="btn button-primary font-bold ml-2 btn-green"
                      ><i class="fa-regular fa-check mr-2"></i>Approved
                    </button>
                    <button 
                      *ngIf="customizeData?.introVideo?.status === 'pending'" 
                      type="button" 
                      class="btn btn-orange font-bold ml-2"
                      ><i class="fas color-white fa-clock mr-2"></i><span class="color-white">Under review</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>
        <!-- END of tab-pane -->

        <div class="tab-pane" id="tab3rdParty" role="tabpanel">
          <div class="d-flex align-items-center mb-4 pb-0 pb-sm-3 justify-content-between mb-hide">
            <div class="dropdown ml-sm-auto">
              <button
                type="button"
                class="share-btn disclaimer-bold button-primary"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              >
                <i class="far fa-share-square" aria-hidden="true"></i>
                {{ "share" | translate }}
              </button>
              <div
                class="dropdown-menu dropdown-bg dropdown-menu-right"
                aria-labelledby="dropdownMenuButton"
              >
                <a class="dropdown-item disclaimer-reg" href="#">
                  <i class="fab fa-facebook-square" aria-hidden="true"></i
                  >{{ "share-on-facebook" | translate }}
                </a>
                <a class="dropdown-item disclaimer-reg" href="#">
                  <i class="fab fa-twitter-square" aria-hidden="true"></i
                  >{{ "share-on-twitter" | translate }}
                </a>
                <a class="dropdown-item disclaimer-reg" href="#">
                  <i class="far fa-envelope" aria-hidden="true"></i
                  >{{ "send-a-link-by-email" | translate }}
                </a>
                <a class="dropdown-item disclaimer-reg" href="#">
                  <i class="far fa-comment" aria-hidden="true"></i
                  >{{ "send-a-link-by-sms" | translate }}
                </a>
                <a class="dropdown-item disclaimer-reg" href="#">
                  <i class="far fa-clone" aria-hidden="true"></i
                  >{{ "copy-link" | translate }}
                </a>
              </div>
            </div>
          </div>

          <div class="card card-default tab-card integrations">
            <h3 class="color-black mb-3 mb-sm-4 title">
              {{ "integrate-with-facebook-pixel-tracking" | translate }}
            </h3>
            <div class="row">
              <div class="col-sm-4 col-12">
                <div class="img-wrap">
                  <img
                    src="assets/images/inte-facebook-img.svg"
                    class="img-fluid"
                    alt="img"
                  />
                </div>
              </div>
              <div class="col-sm-8 col-12">
                <p class="color-gray text">
                  {{
                    "facebook-is-an-excellent-way-to-engage-with-your-customers" | translate
                  }}
                  <span class="d-block mb-4 mt-2">
                    <a href="https://www.facebook.com/business/help/171689010314963" target="_blank" class="color-brand">
                      {{ "get-your-facebook-pixel-id" | translate }}
                      <i class="fa-solid fa-arrow-up-right-from-square ml-1"></i>
                    </a>
                  </span>
                </p>
                <div class="form-group-outer">
                  <div class="form-group mb-0 mr-3">
                    <label class="color-black disclaimer-bold">
                      {{ "facebook-pixel-id" | translate }}
                    </label>
                    <input
                      [(ngModel)]="fbPixelId"
                      type="text"
                      class="form-control color-black"
                    />
                  </div>
                  <button
                    (click)="savePixelId()"
                    class="share-btn disclaimer-bold button-primary"
                  >
                    {{ "submit" | translate }}
                    <i
                      class="fa fa-spinner fa-spin"
                      *ngIf="isPixelIdSubmitted"
                    ></i>
                  </button>
                </div>
                <div class="form-group-outer">
                  <div class="form-group mb-0 mr-3">
                    <label class="color-black disclaimer-bold">{{
                      "verify-domain-meta-tag" | translate
                    }}</label>
                    <input
                      [(ngModel)]="fbMetaTag"
                      type="text"
                      class="form-control color-black"
                    />
                  </div>
                  <button
                    (click)="saveFbMetaTag()"
                    class="share-btn disclaimer-bold button-primary"
                  >
                    {{ "submit" | translate }}
                    <i
                      class="fa fa-spinner fa-spin"
                      *ngIf="isfbMetaTagSubmitted"
                    ></i>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div class="card card-default tab-card integrations">
            <h3 class="color-black mb-3 mb-sm-4 title">
              {{ "integrate-with-facebook-messenger" | translate }}
            </h3>
            <div class="row">
              <div class="col-sm-4 col-12">
                <div class="img-wrap">
                  <img
                    src="assets/images/inte-facebook-messenger-img.svg"
                    class="img-fluid"
                    alt="img"
                  />
                </div>
              </div>
              <div class="col-sm-8 col-12">
                <p class="color-gray text">
                  {{ "integrate-your-facebook-page-with-your-referrer-website" | translate }} <br><br>
                  {{ "You also need to add shopketo.com to the Whitelisted domains on Facebook" | translate }}
                  <span class="d-block mt-2 mb-4">
                    <a href="https://www.facebook.com/help/1503421039731588" target="_blank" class="color-brand">
                      {{ "find-your-facebook-page-id" | translate }}
                      <i class="fa-solid fa-arrow-up-right-from-square ml-1"></i>
                    </a>
                  </span>
                </p>
                <div class="form-group-outer">
                  <div class="form-group mb-0 mr-3">
                    <label class="color-black disclaimer-bold">
                      {{ "facebook-page-id" | translate }}
                    </label>
                    <input
                      [(ngModel)]="fbPageId"
                      type="text"
                      class="form-control color-black"
                    />
                  </div>
                  <button
                    (click)="savePageId()"
                    class="share-btn disclaimer-bold button-primary"
                  >
                    {{ "submit" | translate }}
                    <i
                      class="fa fa-spinner fa-spin"
                      *ngIf="isPageIdSubmitted"
                    ></i>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div class="card card-default tab-card integrations">
            <h3 class="color-black mb-3 mb-sm-4 title">
              {{ "track-your-site-with-google-analytics" | translate }}
            </h3>
            <div class="row">
              <div class="col-sm-4 col-12">
                <div class="img-wrap">
                  <img
                    src="assets/images/inte-google-img.svg"
                    class="img-fluid"
                    alt="img"
                  />
                </div>
              </div>
              <div class="col-sm-8 col-12">
                <p class="color-gray text">
                  {{ "integrate-your-referral-website-with-your-own-google-analytics" | translate }}
                  <span class="d-block mb-4 mt-2">
                    <a href="https://support.google.com/analytics/answer/9539598" target="_blank" class="color-brand">
                      {{ "find-your-google-tag-id" | translate }}
                      <i class="fa-solid fa-arrow-up-right-from-square ml-1"></i>
                    </a>
                  </span>
                </p>
                <div class="form-group-outer">
                  <div class="form-group mb-0 mr-3">
                    <label class="color-black disclaimer-bold">
                      {{ "ga-tracking-id" | translate }}
                    </label>
                    <input
                      [(ngModel)]="gaTrackId"
                      type="text"
                      class="form-control color-black"
                    />
                  </div>
                  <button
                    (click)="saveGAId()"
                    class="share-btn disclaimer-bold button-primary"
                  >
                    {{ "submit" | translate }}
                    <i
                      class="fa fa-spinner fa-spin"
                      *ngIf="isGAIdSubmitted"
                    ></i>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div class="card card-default tab-card integrations google-add">
            <h3 class="color-black mb-3 mb-sm-4 title">
              {{ "track-your-site-with-google-ad-conversion" | translate }}
            </h3>
            <div class="row">
              <div class="col-sm-4 col-12">
                <div class="img-wrap">
                  <img
                    src="assets/images/inte-google-add-img.svg"
                    class="img-fluid"
                    alt="img"
                  />
                </div>
              </div>
              <div class="col-sm-8 col-12">
                <p class="color-gray text">
                  {{ "take-your-advertising-to-the-next-level-with-google-ad-conversion-tracking" | translate }}
                  <span class="d-block mb-4 mt-2">
                    <a href="https://support.google.com/tagmanager/answer/6105160" target="_blank" class="color-brand">
                      {{ "google-ads-conversions" | translate }}
                      <i class="fa-solid fa-arrow-up-right-from-square ml-1"></i>
                    </a>
                  </span>
                </p>
                <div class="form-group-outer">
                  <div class="form-group mb-0 mr-3">
                    <label class="color-black disclaimer-bold">
                      {{ "add-conversion-id" | translate }}</label>
                    <input
                      [(ngModel)]="gaAdConvId"
                      type="text"
                      class="form-control color-black"
                    />
                  </div>
                  <div class="form-group mb-0 mr-3">
                    <label class="color-black disclaimer-bold">
                      {{ "add-conversion-label" | translate }}
                    </label>
                    <input
                      [(ngModel)]="gaAdConvLbl"
                      type="text"
                      class="form-control color-black"
                    />
                  </div>
                  <button
                    (click)="saveAdConvId()"
                    class="share-btn disclaimer-bold button-primary"
                  >
                    {{ "submit" | translate }}
                    <i
                      class="fa fa-spinner fa-spin"
                      *ngIf="isAdConvIdSubmitted"
                    ></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- END of tab-pane -->
      </div>
      <!-- END of tab-content -->
    </div>
    <!-- END of analytics-wraper -->
  </figure>
</article>

<div *ngIf="showConfirmToaster" class="sk-dashboard-popupalrt">
  <p class="p-small text-center font-bold">Customization saved</p>
</div>

<ng-template #loader>
  <app-loader></app-loader>
</ng-template>
